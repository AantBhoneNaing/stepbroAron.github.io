<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aron's Clothing</title>
    <link rel="stylesheet" href="./style.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
</head>
<body>
    <header>
        <div class="nav container">
            <a href="" class="logo">ARON's Clothing</a>
            <i class='bx bxs-cart' id="cart-icon"></i>
            <span class="aron-quantity">0</span>

            <div class="mycart">
                <h2 class="mycart-title">My Cart</h2>  

                <div class="mycart-content">
                    <!-- <div class="mycart-box">
                        <img src="./img/product1.jpg" alt="" class="mycart-img">

                        <div class="mycart-details-box">
                            <div class="mycart-product-title">AEROREADY SHIRT</div>
                            <div class="mycart-price">$0</div>
                            <input type="number" name="" value="1" class="mycart-quantity">
                        </div>

                        <i class='bx bxs-trash-alt cart-remove'></i>
                    </div>     -->
                </div>

                <div class="total">
                    <div class="total-title">Total</div>
                    <div class="total-price">$0</div>
                </div>
                <button type="button" class="buy-btn">Buy now</button>

                <i class='bx bx-x close-cart class="close-cart" ' ></i>
            </div>

        </div>
    </header>

<section class="shop container">
    <h2 class="section-title">SHOP PRODUCT</h2>
    <div class="shop-content">

        <div class="product-box">
            <img src="./img/product1.jpg" alt="" class="product-img">
            <h2 class="product-title">AEROREADY SHIRT</h2>
            <div class="price">$25</div>
            <i class='bx bx-cart-add icons add-cart'></i>
        </div>

        <div class="product-box">
            <img src="./img/product2.jpg" alt="" class="product-img">
            <h2 class="product-title">WIRELESS EARBUDS</h2>
            <div class="price">$100</div>
            <i class='bx bx-cart-add icons add-cart'></i>
        </div>

        <div class="product-box">
            <img src="./img/product3.jpg" alt="" class="product-img">
            <h2 class="product-title">HOODED PARKA</h2>
            <div class="price">$45</div>
            <i class='bx bx-cart-add icons add-cart'></i>
        </div>

        <div class="product-box">
            <img src="./img/product4.jpg" alt="" class="product-img">
            <h2 class="product-title">STRAW METAL BOTTLE</h2>
            <div class="price">$24.04</div>
            <i class='bx bx-cart-add icons add-cart'></i>
        </div>

        <div class="product-box">
            <img src="./img/product5.jpg" alt="" class="product-img">
            <h2 class="product-title">METAL SUNGLASS</h2>
            <div class="price">$50</div>
            <i class='bx bx-cart-add icons add-cart'></i>
        </div>

        <div class="product-box">
            <img src="./img/product6.jpg" alt="" class="product-img">
            <h2 class="product-title">BACK HAT</h2>
            <div class="price">$30</div>
            <i class='bx bx-cart-add icons add-cart'></i>
        </div>

        <div class="product-box">
            <img src="./img/product7.jpg" alt="" class="product-img">
            <h2 class="product-title">ADDIDAS BACKPACK</h2>
            <div class="price">$47</div>
            <i class='bx bx-cart-add icons add-cart'></i>
        </div>

        <div class="product-box">
            <img src="./img-2/product1.jpeg" alt="" class="product-img">
            <h2 class="product-title">ULTRABOOT 22</h2>
            <div class="price">$65</div>
            <i class='bx bx-cart-add icons add-cart'></i>
        </div>

        <div class="product-box">
            <img src="./img-2/product6.jpeg" alt="" class="product-img">
            <h2 class="product-title">ADDIDA EARBUDS</h2>
            <div class="price">$60</div>
            <i class='bx bx-cart-add icons add-cart'></i>
        </div>

        <div class="product-box">
            <img src="./img-2/product2.jpeg" alt="" class="product-img">
            <h2 class="product-title">ESSENTIAL BACKPACK</h2>
            <div class="price">$45</div>
            <i class='bx bx-cart-add icons add-cart'></i>
        </div>

        <div class="product-box">
            <img src="./img-2/product3.jpeg" alt="" class="product-img">
            <h2 class="product-title">ADDIDAS HAT</h2>
            <div class="price">$30</div>
            <i class='bx bx-cart-add icons add-cart'></i>
        </div>

        <div class="product-box">
            <img src="./img-2/product4.jpeg" alt="" class="product-img">
            <h2 class="product-title">ARGENTINA SHIRT</h2>
            <div class="price">$25</div>
            <i class='bx bx-cart-add icons add-cart'></i>
        </div>

        <div class="product-box">
            <img src="./img-2/product5.jpeg" alt="" class="product-img">
            <h2 class="product-title">TRACKING HODDIE</h2>
            <div class="price">$79</div>
            <i class='bx bx-cart-add icons add-cart'></i>
        </div>

        <div class="product-box">
            <img src="./img/product8.jpg" alt="" class="product-img">
            <h2 class="product-title">ULTRABOOT 32</h2>
            <div class="price">$90</div>
            <i class='bx bx-cart-add icons add-cart'></i>
        </div>

        <div class="product-box">
            <img src="./img-2/product7.jpeg" alt="" class="product-img">
            <h2 class="product-title">3WAYS BOTTLE</h2>
            <div class="price">$25</div>
            <i class='bx bx-cart-add icons add-cart'></i>
        </div>

        <div class="product-box">
            <img src="./img-2/product8.jpeg" alt="" class="product-img">
            <h2 class="product-title">ULTRABOOT 22</h2>
            <div class="price">$90</div>
            <i class='bx bx-cart-add icons add-cart'></i>
        </div>

    </div>

    <script>
        let cartIcon=document.querySelector('#cart-icon');
        let myCart=document.querySelector('.mycart');
        let closeCart=document.querySelector('.close-cart');

        cartIcon.onclick=()=>{
            myCart.classList.add('active');
            updateQuantity();
            updateTotal();
        }

        closeCart.onclick=()=>{
            myCart.classList.remove('active');
        }

       if(document.readyState=='loading'){
        document.addEventListener('DOMContentLoaded',ready)
       }else{
        ready();
       }

    //    making function

    function ready(){
 //remove item 
        var removeCartButtons=document.getElementsByClassName('cart-remove')
        console.log(removeCartButtons);
        for ( var i = 0 ; i<removeCartButtons.length ; i++){
            var button=removeCartButtons[i];
            button.addEventListener('click', function (event) {
                removeCartItem(event)
            });
        }
        //quantity-change
        var quantityInputs=document.getElementsByClassName('mycart-quantity')
         for ( var i = 0 ; i<quantityInputs.length ; i++){
            var input=quantityInputs[i]
            input.addEventListener('change',quantityChanged);

        }
        //add to cart

        var addCart=document.getElementsByClassName('add-cart');
        for  (var i = 0 ; i<addCart.length ; i++){
            var button=addCart[i]
            button.addEventListener('click',addCartClicked);
        }

        //buy button work
        document
        .getElementsByClassName('buy-btn')[0]
        .addEventListener('click',buyButtonClicked);
    }

    //Buy Button 

    function buyButtonClicked(){
        alert('YOUR ORDER IS PLACED SUCCESSFULLY,THANKS!')
        var cartContent=document.getElementsByClassName('mycart-content')[0]
        while(cartContent.hasChildNodes()){
            cartContent.removeChild(cartContent.firstChild);
        }
        updateTotal();
        updateQuantity();
    }

    function updateQuantity(){
        var cartBoxes = document.getElementsByClassName('mycart-box');
        var quantity = cartBoxes.length;
        document.querySelector('.aron-quantity').innerText = quantity;
    }

    function removeCartItem(event){
        var buttonClicked = event.target;
        buttonClicked.parentElement.remove();
        updateTotal();
        updateQuantity();

         // Check if there are no more items in the cart and update total to 0
         if (cartContent.children.length === 0) {
        document.getElementsByClassName('total-price')[0].innerText = '$0';
        }
    }

    //quantity-change

    function quantityChanged(event){
        var input= event.target
        if(isNaN(input.value) || input.value <= 0){
            input.value=1
        }
        updateTotal();
        updateQuantity();
    }

    //Add to cart

    function addCartClicked(event){
     var button = event.target;
     var shopProducts = button.parentElement;
     var title=shopProducts.getElementsByClassName("product-title")[0].innerText;
     var price=shopProducts.getElementsByClassName('price')[0].innerText;
     var productImg=shopProducts.getElementsByClassName('product-img')[0].src;
     addProductToCart(title,price,productImg);
     updateTotal();
     updateQuantity();
    }
    
    
    function addProductToCart(title,price,productImg){
        var cartShopBox=document.createElement('div');
        cartShopBox.classList.add('mycart-box')
        var cartItems=document.getElementsByClassName('mycart-content')[0] ;
        var cartItemsNames=cartItems.getElementsByClassName('mycart-product-title');
        for( var i = 0 ; i<cartItemsNames.length ; i++){
            if(cartItemsNames[i].innerText==title){
            alert('THIS ITEM WAS CHOOSEN');
            }
        } 
    

    var cartBoxContent = `
                        
                        <img src="${productImg}" alt="" class="mycart-img">

                        <div class="mycart-details-box">
                            <div class="mycart-product-title">${title}</div>
                            <div class="mycart-price">${price}</div>
                            <input type="number" name="" value="1" class="mycart-quantity">
                        </div>

                        <i class='bx bxs-trash-alt cart-remove'></i>  `

                        cartShopBox.innerHTML = cartBoxContent
                        cartItems.append(cartShopBox)
                        cartShopBox
                        .getElementsByClassName('cart-remove')[0]
                        .addEventListener('click',removeCartItem);
                        cartShopBox
                        .getElementsByClassName('mycart-quantity')[0]
                        .addEventListener('change',quantityChanged);
                    }
                    

    //update total

    function updateTotal(){
        var cartContent=document.getElementsByClassName('mycart-content')[0]
        var cartBoxes=cartContent.getElementsByClassName('mycart-box')
        var total=0;
        for ( var i = 0 ; i<cartBoxes.length ; i++){
            var cartBox =cartBoxes[i]
            var priceElement = cartBox.getElementsByClassName('mycart-price')[0];
            var quantityElement = cartBox.getElementsByClassName('mycart-quantity')[0];
            var price=parseFloat(priceElement.innerText.replace('$',''));
            var quantity =quantityElement.value;
            total+=price * quantity;
            total=total || 0;

            //if price conatins some cents value

            total=Math.round(total*100)/100;
            document.getElementsByClassName('total-price')[0].innerText='$'+total;
        }
    }
    </script>

</section>

<footer>
    <div class="nav-footer">
        <h1 class="footer-lorem">MAKE YOUR SIMPLE WAY BY USING THIS</h1>
    </div>
</footer>
    
</body>
</html>